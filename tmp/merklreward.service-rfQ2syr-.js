import{d as k}from"./module-3rE_GSaZ.js";import{f as I}from"./utils-BCzdQfNw.js";import{D as y}from"./pagination-lesfVksj.js";const D=k().create(({inject:c})=>{const s=(e,t,a=void 0)=>I("Reward",a)(e,t),m=c(["request"]).inFunction(({request:e},t)=>{const a=new URL(e.url),n=a.searchParams.get("campaignId"),r=a.searchParams.get("page"),i=a.searchParams.get("items"),o=a.searchParams.get("recipient"),u=Object.assign({campaignId:n,items:i??y,page:r,recipient:o},t??{},r!==null&&{page:Number(r)-1});return Object.entries(u).reduce((d,[l,w])=>Object.assign(d,w==null?{}:{[l]:w}),{})}),h=c(["api","backend","request"]).inFunction(({api:e,backend:t,request:a},n,r)=>{const i=t.chains?.map(({id:u})=>u).join(","),o={test:t.alwaysShowTestTokens?!0:r.searchParams.get("test")??!1,tags:t?.tags?.length?t.tags:void 0};return r.searchParams.get("chainId")&&(o.reloadChainId=r.searchParams.get("chainId")),i&&(o.chainIds=i),s(e.v4.users({address:n}).rewards.breakdowns.get,{query:o},a)}),p=c(["api","request","backend"]).inFunction(async({api:e,request:t},a)=>{const n=Object.assign(m.handler({request:t}),a??void 0),r=[s(g=>e.v4.rewards.token.get({query:{...n,...g}}),{}),s(e.v4.rewards.token.count.get,{query:n},t),s(e.v4.rewards.token.total.get,{query:n},t)],[i,o,u]=await Promise.all(r);return{count:o,rewards:i,total:u.amount}}),v=c(["api","request","backend"]).inFunction(async({api:e,request:t,backend:a},n)=>{const r=Object.assign(m.handler({request:t}),n??void 0),o=new URL(t.url).searchParams.get("test")==="true"?!0:a.alwaysShowTestTokens??void 0,u=[s(e.v4.rewards.get,{query:{...r,hide:!o}}),s(e.v4.rewards.count.get,{query:r},t),s(e.v4.rewards.total.get,{query:r},t)],[g,d,l]=await Promise.all(u);return{count:d,rewards:g,total:l.amount}}),q=c(["api","request"]).inFunction(({api:e,request:t},a)=>s(e.v4.rewards.total.get,{query:{...a,campaignId:a.campaignId}},t)),F=c(["api"]).inFunction(async({api:e},t,a)=>{const n=await s(e.v4.rewards.count.get,{query:{chainId:t,campaignId:a}}),r=await s(e.v4.rewards.total.get,{query:{chainId:t,campaignId:a}});return{count:n?.count,total:r}}),T=c(["api"]).inFunction(async({api:e})=>{const t=new Date,a=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()-30,0,0,0,0)).toISOString().split("T")[0];return await s(e.v4.rewards.total.distributed.get,{query:{since:a}})}),P=c(["api","backend"]).inFunction(async({api:e,backend:t},a,n,r)=>{const i=r?.test?!0:t?.alwaysShowTestTokens??void 0,o={chainId:a,campaignId:n,page:r?.page,items:r?.items??y,recipient:r?.recipient,hide:!i},u=[s(e.v4.rewards.get,{query:{...o}}),s(e.v4.rewards.count.get,{query:{...o}}),s(e.v4.rewards.total.get,{query:{...o}})],[g,d,l]=await Promise.all(u);return{count:d,rewards:g,total:l.amount}}),b=c(["api"]).inFunction(async({api:e},t,a)=>s(e.v4.rewards.campaign({campaignId:t}).list.get,{query:a?.length?{addresses:a}:{addresses:[]}})),f=c(["api"]).inFunction(async({api:e},t,a)=>s(e.v4.rewards.unclaim.get,{query:{chainId:a??0,campaignIds:t}}));return{getForUser:h,getTokenLeaderboard:p,getCampaignLeaderboard:v,getCampaignLeaderboardByParams:P,getUnclaimRewards:f,getCampaignReallocateList:b,getCampaignStats:F,total:q,getMerklStatsSince30Days:T}});export{D as R};
